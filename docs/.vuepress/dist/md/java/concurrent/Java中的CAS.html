<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Java中的CAS | 张忠振的笔记</title>
    <meta name="generator" content="VuePress 1.9.9">
    <link rel="icon" href="/favicon.ico">
    <script charset="utf-8" async="async" src="/js/jquery.min.js"></script>
    <script charset="utf-8" async="async" src="/js/global.js"></script>
    <script charset="utf-8" async="async" src="/js/fingerprint2.min.js"></script>
    <script>
              var _hmt = _hmt || [];
              (function() {
                var hm = document.createElement("script");
                hm.src = "https://hm.baidu.com/hm.js?0b31b4c146bf7126aed5009e1a4a11c8";
                var s = document.getElementsByTagName("script")[0];
                s.parentNode.insertBefore(hm, s);
              })();
            </script>
    <meta name="description" content="包含: Java 基础，Netty，SpringBoot中间件开发...">
    <meta property="og:title" content="Java中的CAS">
    <meta property="og:type" content="article">
    <meta property="og:url" content="/md/java/concurrent/Java%E4%B8%AD%E7%9A%84CAS.html">
    <meta name="twitter:title" content="Java中的CAS">
    <meta name="twitter:url" content="/md/java/concurrent/Java%E4%B8%AD%E7%9A%84CAS.html">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="robots" content="all">
    <meta name="author" content="张忠振">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <meta name="keywords" content="张忠振的笔记,Java基础, SpringBoot Stater, Netty">
    <meta name="apple-mobile-web-app-capable" content="yes">
    
    <link rel="preload" href="/assets/css/0.styles.a5c76dcd.css" as="style"><link rel="preload" href="/assets/css/styles.css?v=1687773322914" as="style"><link rel="preload" href="/assets/js/cg-styles.js?v=1687773322914" as="script"><link rel="preload" href="/assets/js/cg-app.js?v=1687773322914" as="script"><link rel="preload" href="/assets/js/cg-3.js?v=1687773322914" as="script"><link rel="preload" href="/assets/js/cg-4.js?v=1687773322914" as="script"><link rel="preload" href="/assets/js/cg-11.js?v=1687773322914" as="script">
    <link rel="stylesheet" href="/assets/css/0.styles.a5c76dcd.css"><link rel="stylesheet" href="/assets/css/styles.css?v=1687773322914">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">张忠振的笔记</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Java" class="dropdown-title"><span class="title">Java</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/md/java/interview/2020-07-28-面经手册 · 开篇《面试官都问我啥》.html" class="nav-link">
  面经手册
</a></li><li class="dropdown-item"><!----> <a href="/md/java/develop-jvm/2019-05-01-用Java实现JVM第一章《命令行工具》.html" class="nav-link">
  用Java实现JVM
</a></li><li class="dropdown-item"><!----> <a href="/md/java/core/2020-01-06-[源码分析]咋嘞？你的IDEA过期了吧！加个Jar包就破解了，为什么？.html" class="nav-link">
  基础技术
</a></li><li class="dropdown-item"><!----> <a href="/md/java/concurrent/Java中的CAS.html" class="nav-link">
  Java并发
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Netty" class="dropdown-title"><span class="title">Netty</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/md/netty/basics/NIO基础：三大组件.html" class="nav-link">
  Netty基础篇
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="中间件" class="dropdown-title"><span class="title">中间件</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/md/assembly/middleware/统一白名单组件.html" class="nav-link">
  springboot中间件
</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Java" class="dropdown-title"><span class="title">Java</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/md/java/interview/2020-07-28-面经手册 · 开篇《面试官都问我啥》.html" class="nav-link">
  面经手册
</a></li><li class="dropdown-item"><!----> <a href="/md/java/develop-jvm/2019-05-01-用Java实现JVM第一章《命令行工具》.html" class="nav-link">
  用Java实现JVM
</a></li><li class="dropdown-item"><!----> <a href="/md/java/core/2020-01-06-[源码分析]咋嘞？你的IDEA过期了吧！加个Jar包就破解了，为什么？.html" class="nav-link">
  基础技术
</a></li><li class="dropdown-item"><!----> <a href="/md/java/concurrent/Java中的CAS.html" class="nav-link">
  Java并发
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Netty" class="dropdown-title"><span class="title">Netty</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/md/netty/basics/NIO基础：三大组件.html" class="nav-link">
  Netty基础篇
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="中间件" class="dropdown-title"><span class="title">中间件</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/md/assembly/middleware/统一白名单组件.html" class="nav-link">
  springboot中间件
</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>并发问题</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/md/java/concurrent/Java中的CAS.html" class="active sidebar-link">Java中的CAS</a></li></ul></section></li></ul> </aside> <div><main class="withouttoc page"> <div class="theme-default-content content__default"><h1 id="java中的cas"><a href="#java中的cas" class="header-anchor">#</a> Java中的CAS</h1> <blockquote><p>Compare And Swap  --  比较并替换</p> <p>乐观锁策略</p></blockquote> <h2 id="一、举个例子"><a href="#一、举个例子" class="header-anchor">#</a> 一、举个例子</h2> <p>有如下的一段程序，最后输出的结果是否是<strong>30000</strong>？</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Integer</span> count <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">3</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
                <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> <span class="token number">10000</span><span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    count<span class="token operator">++</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token class-name">TimeUnit</span><span class="token punctuation">.</span><span class="token constant">SECONDS</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;count : &quot;</span> <span class="token operator">+</span> count<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p>执行了5次，结果如下：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code>count <span class="token operator">:</span> <span class="token number">13754</span>
count <span class="token operator">:</span> <span class="token number">12719</span>
count <span class="token operator">:</span> <span class="token number">14616</span>
count <span class="token operator">:</span> <span class="token number">14867</span>
count <span class="token operator">:</span> <span class="token number">13521</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><strong>这是为什么呢？</strong></p> <p>这是因为在多线程环境下，多个线程同时对<code>count</code>进行自增操作，可能会出现线程安全问题。</p> <p>具体来说，可能会出现一些线程在读取<code>count</code>的值时，此时<code>count</code>的值还没有被其它线程更新，导致这些线程读取到的<code>count</code>的值是相同的，然后它们同时对<code>count</code>进行自增操作，导致最终的<code>count</code>的值小于30000。</p> <h2 id="二、正确操作"><a href="#二、正确操作" class="header-anchor">#</a> 二、正确操作</h2> <h3 id="_1、synchronized"><a href="#_1、synchronized" class="header-anchor">#</a> 1、synchronized</h3> <p>在<code>count++</code>处添加<code>synchronized</code>：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code>       <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">3</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
                <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> <span class="token number">10000</span><span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token keyword">synchronized</span> <span class="token punctuation">(</span><span class="token class-name">CASDemo</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                        count<span class="token operator">++</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>输出5次结果：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code>count <span class="token operator">:</span> <span class="token number">30000</span>
count <span class="token operator">:</span> <span class="token number">30000</span>
count <span class="token operator">:</span> <span class="token number">30000</span>
count <span class="token operator">:</span> <span class="token number">30000</span>
count <span class="token operator">:</span> <span class="token number">30000</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>加了同步锁之后，<code>count</code>自增的操作变成了原子性操作，所以最终的输出一定是30000，代码实现了线程安全。</p> <p><code>synchronized</code> 作为 Java 中的一种同步机制，可以保证多个线程在访问共享资源时的互斥性，从而避免了竞态条件和数据不一致的问题。但是，<code>synchronized</code> 也存在一些缺点：</p> <ol><li>性能问题：<code>synchronized</code> 的实现会涉及到锁的获取和释放，这些操作都会带来一定的性能开销。在高并发场景下，过多地使用 <code>synchronized</code> 可能会导致程序性能的下降。</li> <li>可重入性问题：如果一个线程已经获得了某个对象的锁，那么它可以重复获取该对象的锁，而这种重复获取锁的操作被称为“可重入”。但是，如果重入的次数过多，就可能会导致线程堆栈溢出。</li> <li>死锁问题：如果多个线程在互相等待对方释放锁的情况下，就可能会出现死锁的情况。这种情况下，所有线程都会被阻塞，程序无法继续执行。</li> <li>可见性问题：在多线程环境下，线程之间对共享变量的修改可能不会立即对其他线程可见，这就可能导致数据不一致的问题。虽然 <code>synchronized</code> 可以保证可见性，但是它的效率较低。</li></ol> <p>尽管Java1.6为<code>Synchronized</code>做了优化，增加了从偏向锁到轻量级锁再到重量级锁的过度，但是在最终转变为重量级锁之后，性能仍然较低。</p> <h3 id="_2、原子操作"><a href="#_2、原子操作" class="header-anchor">#</a> 2、原子操作</h3> <p>所谓原子操作类，指的是java.util.concurrent.atomic包下，一系列以Atomic开头的包装类。例如<code>AtomicBoolean</code>，<code>AtomicInteger</code>，<code>AtomicLong</code>。它们分别用于<code>Boolean</code>，<code>Integer</code>，<code>Long</code>类型的原子性操作。</p> <p>将Integer改变成AtomicInteger后：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code> <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">AtomicInteger</span> count <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AtomicInteger</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>输出5次结果：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code>count <span class="token operator">:</span> <span class="token number">30000</span>
count <span class="token operator">:</span> <span class="token number">30000</span>
count <span class="token operator">:</span> <span class="token number">30000</span>
count <span class="token operator">:</span> <span class="token number">30000</span>
count <span class="token operator">:</span> <span class="token number">30000</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><strong>Atomic操作的底层实现正是利用的CAS机制。</strong></p> <h2 id="三、cas"><a href="#三、cas" class="header-anchor">#</a> 三、CAS</h2> <h3 id="_1、什么是cas"><a href="#_1、什么是cas" class="header-anchor">#</a> 1、什么是CAS</h3> <p>CAS是英文单词 Compare And Swap 的缩写，翻译过来就是比较并替换。</p> <p>CAS机制当中使用了3个基本操作数：内存地址V，旧的预期值A，要修改的新值B。</p> <p>更新一个变量的时候，只有当变量的预期值A和内存地址V当中的实际值相同时，才会将内存地址V对应的值修改为B。</p> <h3 id="_2、cas原理"><a href="#_2、cas原理" class="header-anchor">#</a> 2、CAS原理</h3> <ul><li>Compare-And-Swap。是一条CPU并发原语。（原语： 操作系统范畴，依赖硬件，不被中断。）</li> <li>功能是判断内存某个位置的值是否为预期值 （Compare），是就更新（Swap），这个过程是原子的。</li> <li>cas有三个操作数，内存值V，旧预期值A，要更 新的值B。仅当预期值A=内存值V时，才将内存 值V修改为B，否则什么都不做。</li> <li>自旋：比较并交换，直到比较成功</li> <li>底层靠Unsafe类保证原子性。</li></ul> <h3 id="_3、unsafe类"><a href="#_3、unsafe类" class="header-anchor">#</a> 3、Unsafe类</h3> <ul><li>该类所有方法都是native修饰，直接调用底层资 源。sun.misc包中。</li> <li>可以像C的指针一样直接操作内存。java的CAS 操作依赖Unsafe类的方法。</li></ul> <h3 id="_4、cas缺点"><a href="#_4、cas缺点" class="header-anchor">#</a> 4、CAS缺点</h3> <ul><li>循环时间长，开销大。如果cas失败，就一直do while尝试。如果长时间不成功，可能给CPU带来很大开销。</li> <li>**只能保证一个共享变量的原子操作。**如果时多个共享变量，cas无法保证原子性，只能加锁，锁住代码段。</li> <li>存在ABA问题。</li></ul> <h3 id="_5、aba问题"><a href="#_5、aba问题" class="header-anchor">#</a> 5、ABA问题</h3> <h4 id="_1、问题描述"><a href="#_1、问题描述" class="header-anchor">#</a> 1、问题描述:</h4> <p>线程1做CAS操作将A改为B后再改为A，之后线程2再做CAS时修改成功了，这不符合设计思想。</p> <p>比如线程1从内存位置V中取出A，此时线程2也取出A。且线程1做了一次CAS将值改为了B，然后又做了一次CAS将值改回了A。此时线程2做CAS发现内存中还是A，之后线程2操作成功。这个时候实际上A值已经被其他线程改变过，这与设计思想是不符合的。</p> <h4 id="_2、解决方案"><a href="#_2、解决方案" class="header-anchor">#</a> 2、解决方案</h4> <p>AtomicStampReference，解决CAS中出现的ABA问题。</p> <p>AtomicStampedReference类可以在原子性地更新变量的同时，还可以记录变量的版本号，从而避免ABA问题。当一个线程更新变量时，需要提供当前的版本号，如果当前的版本号与期望的版本号不一致，则说明变量已经被修改过，此时更新操作将失败。这样就可以避免ABA问题的出现。</p> <p>除了AtomicStampedReference类，还可以使用其他的同步机制来避免ABA问题，比如使用synchronized关键字或者Lock接口来保证对变量的操作是原子性的，从而避免出现ABA问题。</p></div> <footer class="page-edit"><div class="edit-link"><a rel="noopener noreferrer"> aaaa </a></div> <!----></footer> <!----> </main></div> <aside class="page-sidebar"> <div class="page-side-toolbar"><!----> <div class="option-box-toc-over"><img src="/images/system/toc.png" class="nozoom"> <span class="show-txt">目录</span> <div class="toc-container"><div class="pos-box"><div class="icon-arrow"></div> <div class="scroll-box" style="max-height:550px"><div style="font-weight:bold;text-align:center;">Java中的CAS</div> <hr> <div class="toc-box"><ul class="toc-sidebar-links"><li><a href="/md/java/concurrent/Java%E4%B8%AD%E7%9A%84CAS.html#一、举个例子" class="toc-sidebar-link">一、举个例子</a><ul class="toc-sidebar-sub-headers"></ul></li><li><a href="/md/java/concurrent/Java%E4%B8%AD%E7%9A%84CAS.html#二、正确操作" class="toc-sidebar-link">二、正确操作</a><ul class="toc-sidebar-sub-headers"><li class="toc-sidebar-sub-header"><a href="/md/java/concurrent/Java%E4%B8%AD%E7%9A%84CAS.html#_1、synchronized" class="toc-sidebar-link">1、synchronized</a></li><li class="toc-sidebar-sub-header"><a href="/md/java/concurrent/Java%E4%B8%AD%E7%9A%84CAS.html#_2、原子操作" class="toc-sidebar-link">2、原子操作</a></li></ul></li><li><a href="/md/java/concurrent/Java%E4%B8%AD%E7%9A%84CAS.html#三、cas" class="toc-sidebar-link">三、CAS</a><ul class="toc-sidebar-sub-headers"><li class="toc-sidebar-sub-header"><a href="/md/java/concurrent/Java%E4%B8%AD%E7%9A%84CAS.html#_1、什么是cas" class="toc-sidebar-link">1、什么是CAS</a></li><li class="toc-sidebar-sub-header"><a href="/md/java/concurrent/Java%E4%B8%AD%E7%9A%84CAS.html#_2、cas原理" class="toc-sidebar-link">2、CAS原理</a></li><li class="toc-sidebar-sub-header"><a href="/md/java/concurrent/Java%E4%B8%AD%E7%9A%84CAS.html#_3、unsafe类" class="toc-sidebar-link">3、Unsafe类</a></li><li class="toc-sidebar-sub-header"><a href="/md/java/concurrent/Java%E4%B8%AD%E7%9A%84CAS.html#_4、cas缺点" class="toc-sidebar-link">4、CAS缺点</a></li><li class="toc-sidebar-sub-header"><a href="/md/java/concurrent/Java%E4%B8%AD%E7%9A%84CAS.html#_5、aba问题" class="toc-sidebar-link">5、ABA问题</a></li></ul></li></ul></div></div></div></div></div> <div class="option-box"><img src="/images/system/github.png" width="28px" class="nozoom"> <span class="show-txt">Github</span></div> <div class="option-box"><img src="/images/system/gitee.png" width="28px" class="nozoom"> <span class="show-txt">Gitee</span></div> <div class="option-box"><img src="/images/system/left.png" width="28px" class="nozoom"> <span class="show-txt">左栏</span></div> <!----> <!----></div>  <!----> </aside></div><div class="global-ui"><LockArticle></LockArticle><PayArticle></PayArticle></div></div>
    <script src="/assets/js/cg-styles.js?v=1687773322914" defer></script><script src="/assets/js/cg-3.js?v=1687773322914" defer></script><script src="/assets/js/cg-4.js?v=1687773322914" defer></script><script src="/assets/js/cg-11.js?v=1687773322914" defer></script><script src="/assets/js/cg-app.js?v=1687773322914" defer></script>
  </body>
</html>
